<!DOCTYPE html>
<html>
  <head>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="style.css">
    <title>Inventory App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui"/>
  </head>

  <body>
    <div id="app" v-cloak>
      <v-app>
        <!--========= Page Card ==============-->
        <v-card v-bind:class="{'logIn': !loggedIn}"  class="overflow-auto">

          <!-- ==============login page============= -->
          <v-container fluid v-if="!loggedIn">
            <v-row justify="center" style="height: 100vh" >
              <v-col class="fill-height d-flex flex-column justify-center align-center" cols="auto">
                <v-card class="mx-auto my-auto" width="500px">
                  <!-- <v-row > -->
                  <h1 class="py-6 px-5 deep-purple lighten-2 text-center">Login</h1>
                  <!-- </v-row> -->
                  <v-row class="px-8 mt-4 mb-2">
                    <v-icon class="mr-2"> mdi-account-box</v-icon>
                    <v-text-field type="text" placeholder="Username">
                  </v-row>
                  <v-row class="px-8 mb-2">
                    <v-icon class="mr-2">
                      mdi-lock
                    </v-icon>
                    <v-text-field type="password" placeholder="Password">
                  </v-row>
                  <v-row>
                    <v-btn class="mx-16 mb-8" @click="loginUser()">Login</button>
                  </v-row>
                </v-card>
                <v-btn href="mailto:d00439987@dmail.dixie.edu" class="grey white--text"><h3>Contact Us</h3></v-btn>          
              </v-col>
            </v-row>
          </v-container>
          
          <!--===== Nav & Menu bar with image =====-->
          <v-container v-show="loggedIn" fluid>
            <v-app-bar absolute color="#6A76AB" 
                      dark 
                      shrink-on-scroll 
                      prominent
                      src="https://images.alphacoders.com/265/265693.png" 
                      fade-img-on-scroll
                      scroll-target="#scrolling-techniques-3"
                      app>
              <!-- Gradient Template -->
              <template v-slot:img="{ props }">
                <v-img v-bind="props"
                      gradient="to top right, rgba(100,115,201,.7), rgba(25,32,72,.7)">
                </v-img>
              </template>

              <!-- PlaceHolder for future expansion menu -->
              <!-- <v-app-bar-nav-icon></v-app-bar-nav-icon> -->
            
              <!-- Current Page title -->
              <v-app-bar-title class="float-left pr-10 ml-2 font-weight-black">{{ currentPage }}</v-app-bar-title>
              
              <v-spacer></v-spacer>

              <v-btn href="mailto:d00439987@dmail.dixie.edu" icon>
                <v-icon >mdi-email</v-icon>
              </v-btn>
        
              <v-btn icon>
                <v-icon>mdi-account-box </v-icon>
              </v-btn>

              <v-btn icon>
                <v-icon>mdi-logout</v-icon>
              </v-btn>

              <!--=== Template for tabs ===-->
              <template v-slot:extension>

                <!-- For loop going through pages (list of pages) and into tab -->
                <v-tabs v-for="tab in pages" align-with-title grow hide-slider>
                  <!-- Display component of each tab with on click and highlight after selection -->
                  <v-tab @Click="currentPage = tab" class="rounded-lg rounded-b-0"
                        v-bind:class="{ 'blue-grey lighten-4 deep-purple--text lighten-3 disabled' : currentPage === tab}">
                    <v-badge
                          color="green"
                          content="6">
                    {{ tab }}
                    </v-badge>
                  </v-tab>
                </v-tabs>
              </template>
            </v-app-bar>

            <!--====== Main page content in main card component ======-->
            <main>
            <!-- Change max-height to auto to disable scroll header and remove 2nd scroll -->
              <v-sheet
                    id="scrolling-techniques-3"
                    class="overflow-y-auto mt-16 pt-16"
                    max-height="650">
                
                <v-container class="mt-16 pt-16" style="height: 650px;">

                  <!--======= Inventory Page =======-->

                  <!-- Search Container for Inventory Page-->
                  <v-container v-if="currentPage == 'Inventory'">
                    <!-- Container for Inventory Search Area -->
                    <v-container>
                      <v-row>
                        <v-col>
                          <!-- Search Inventory Text Input field -->
                          <v-text-field outlined  hide-details label="Search for a Card" placeholder="Cards in Inventory"></v-text-field>
                        </v-col>
                        <v-col>
                          <!-- Submit Inventory Search Button-->
                          <v-btn class="mt-2">Submit</v-btn>
                        </v-col>
                        <!-- Fun Data to Display -->
                        <v-col>
                          <v-icon>
                            mdi-currency-usd
                          </v-icon>
                        </v-col>
                        <v-col>
                          <v-icon>
                            mdi-cards-outline
                          </v-icon>
                          <h2>5</h2>
                        </v-col>
                      </v-row>
                    </v-container>
                    <!-- Search Results displayed using small image uri from scryfall -->
                    <v-row>
                      <v-col class="pr-0 pl-3" cols="auto" v-for="item, index in cardList">                      
                        <v-card min-width="146" class="mx-4">

                          <v-img
                              height="204"
                              :src="item.image_uris.small"
                              contain>
                          </v-img>
                  
                        </v-card>
                      </v-col>
                    </v-row>  
                  </v-container>

                  <!--===== Vuetify Add Card Page =====-->

                  <!--=== Add Card Page Vuetify Card ===-->
                  <v-card v-if="currentPage == 'Add Card'" class="mx-1">
                    <!--= Sub Menu with Search/*Deck/Pile-Cart -->
                    <v-tabs grow optional slider-color="deep-purple lighten-2" class="rounded-lg blue-grey lighten-1">

                      <v-tab class="rounded-lg" @Click="addCardSubPage = 'Search'"
                        active-class="blue-grey lighten-4 deep-purple--text lighten-3 disabled">
                        Search
                      </v-tab>

                      <!-- <v-tab @Click="addCardSubPage = Deck" class="rounded-lg mx-2"
                        active-class="blue-grey lighten-4 deep-purple--text lighten-3 disabled">
                        Deck
                        </v-tab> -->

                      <v-tab @Click="addCardSubPage = 'Pile'" class="rounded-lg"
                        active-class="blue-grey lighten-4 deep-purple--text lighten-3 disabled">
                        Pile
                      </v-tab>

                    </v-tabs>
                    <!--= Search subPage  =-->
                    <v-container v-if="addCardSubPage == 'Search'">
                      <!-- Search field container -->
                      <v-container>
                        <v-row>
                          <v-col cols="6">
                            <v-text-field outlined label="Search for a Card" placeholder="Magic the Gathering Cards Only"
                                      v-model="searchName" @keypress.enter="getSearch()" 
                                      ref="searchInput"
                                      autofocus>
                            </v-text-field>
                          </v-col>
                          <v-col cols="auto">
                            <v-btn class="mt-2" @Click="getSearch()" >Submit</v-btn>
                          </v-col>
                          <v-col cols="auto">
                            <v-btn class="mt-2" @Click="getRandomCard()">Feeling Lucky</v-btn>
                          </v-col>
                          <v-col cols="auto">
                            <v-btn class="mt-2" @Click="resetAddCardSearch()">Reset</v-btn>
                          </v-col>
                        </v-row>
                      </v-container>

                      <!-- Area to display search results for add card -->
                      <v-row>
                        <!--****** the v-for of the search results list will go here -->
                        <v-col v-for="result in searchResults" >
                          <!--****** Card template that will be displayed by v-for -->
                          <v-card width="146" class="mx-4">

                            <template slot="progress">
                              <v-progress-linear
                                    color="deep-purple"
                                    height="10"
                                    indeterminate>
                              </v-progress-linear>
                            </template>

                            <v-img
                                height="204"
                                :src="getSmallImgURI(result)">
                            </v-img>
                            
                            <v-card-text class="pt-1 pb-0">                     
                              
                              <!-- NM button on Add Card Search -->
                              <v-row>
                                <v-col class="pl-0" style="min-width: 30px; max-width: 48px;">
                                  <v-badge
                                        color="deep-purple lighten-2"
                                        :content="result.totalConditions.NM"
                                        :value="result.totalConditions.NM > 0"
                                        class="pl-0"
                                        offset-x="15"
                                        offset-y="12"
                                        left>
                                    <v-btn small rounded min-width="10" max-width="35" @click="addNMtoObject(result)" @click.ctrl="removeNMtoObject(result)">NM</v-btn>
                                  </v-badge>
                                </v-col>
                                <v-col style="min-width: 30px; max-width: 48px;">
                                  <v-badge
                                        color="deep-purple lighten-2"
                                        :content="result.totalConditions.LP"
                                        :value="result.totalConditions.LP > 0"
                                        class="pl-0"
                                        offset-x="15"
                                        offset-y="12"
                                        left>
                                    <v-btn small rounded min-width="10" max-width="35" @click="addLPtoObject(result)" @click.ctrl="removeLPtoObject(result)">LP</v-btn>
                                  </v-badge>
                                </v-col>                             
                                <v-col style="min-width: 30px; max-width: 48px;">
                                  <v-badge
                                        color="deep-purple lighten-2"
                                        :content="result.totalConditions.MP"
                                        :value="result.totalConditions.MP > 0"
                                        class="pl-0"
                                        offset-x="15"
                                        offset-y="12"
                                        left>
                                    <v-btn small rounded min-width="10" max-width="35" @click="addMPtoObject(result)" @click.ctrl="removeMPtoObject(result)">MP</v-btn>
                                  </v-badge>
                                </v-col>
                              </v-row>

                              <v-row>
                                <v-col class="pt-1" style="min-width: 30px; max-width: 70px;">
                                  <v-badge
                                        color="deep-purple lighten-2"
                                        :content="result.totalConditions.HP"
                                        :value="result.totalConditions.HP > 0"
                                        class="pl-0"
                                        offset-x="15"
                                        offset-y="12"
                                        left>
                                    <v-btn small rounded min-width="10" max-width="50" @click="addHPtoObject(result)" @click.ctrl="removeHPtoObject(result)">HP</v-btn>
                                  </v-badge>
                                </v-col>
                                <v-col class="pt-1" style="min-width: 30px; max-width: 70px;">
                                  <v-badge
                                        color="deep-purple lighten-2"
                                        :content="result.totalConditions.DMG"
                                        :value="result.totalConditions.DMG > 0"
                                        class="pl-0"
                                        offset-x="15"
                                        offset-y="12"
                                        left>
                                    <v-btn small rounded min-width="10" max-width="50" @click="addDMGtoObject(result)" @click.ctrl="removeDMGtoObject(result)">DMG</v-btn>
                                  </v-badge>
                                </v-col>
                              </v-row>
                              <v-row>
                                <v-checkbox
                                      class="deep-purple--text lighten-2"
                                      label="Foil?"
                                      color="deep-purple lighten-2"
                                      value="foil"
                                      hide-details>
                                </v-checkbox>
                              </v-row>
                            </v-card-text>

                            <v-row class="mx-1">

                              <v-card-actions class="pt-0 pl-1 pr-1">
                                <v-btn
                                      color="deep-purple lighten-2"
                                      text
                                      @click="addToPile(result)"
                                      class="float-end">
                                      Add
                                </v-btn>
                              </v-card-actions>
                            </v-row>
                          </v-card>
                        </v-col>
                      </v-row>
                    </v-container>
                    <!-- Pile/Cart Page -->
                    <v-container v-if="addCardSubPage == 'Pile'">
                      <v-row v-for="card in pileList">
                        <v-col>
                          <v-card>
                            
                          </v-card>
                        </v-col>
                      </v-row>
                    </v-container>
                  </v-card>

                  <!--=== View Orders ===--->
                  <div id="view-orders" v-if="currentPage == 'View Orders'">

                    <template>
                      <v-simple-table>
                        <template v-slot:default>
                          <thead>
                            <tr>
                              <th class="text-left">
                                Order Number
                              </th>
                              <th class="text-left">
                                Direct
                              </th>
                              <th class="text-left">
                                Status
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr v-for="order, index in orderList"
                                  :key="order.name"
                                  :class="{'blue':order.direct}">
                              <td>{{ order.number }}</td>
                              <td> <v-icon v-if="order.direct" id="checkMark"> mdi-check-bold </v-icon> <v-icon v-else id="xOut">mdi-close-circle</v-icon> </td>
                              <td>{{ order.status }}</td>
                            </tr>
                          </tbody>
                        </template>
                      </v-simple-table>
                    </template>
                  </div>

                  <!--=== Add Order Page ===-->
                  <div id="add-orders" v-if="currentPage == 'Add Order'">
                    <button @click="addOrderSubPage = 'searchCard'" :disabled="addOrderSubPage == 'searchCard'">search an order</button>
                    <button @click="addOrderSubPage = 'addToPile'" :disabled="addOrderSubPage == 'addToPile'">confirm add</button>
                    <button @click="addOrderSubPage = 'pile'" :disabled="addOrderSubPage == 'pile'">my pile</button>
                    <div class="search-card" v-if="addOrderSubPage == 'searchCard'">
                      Search Card
                    </div>
                    <div class="add-to-pile" v-if="addOrderSubPage == 'addToPile'">
                      Add To Pile
                    </div>
                    <div class="pile" v-if="addOrderSubPage == 'pile'">
                      Pile
                      <!-- <div v-for="card in orders">{{ orderCard }}</div> --> 
                      Order Number: <input v-model="orderNumber" type="text">
                      Total Price: $<input v-model="orderPrice" type="text">
                      Direct? <input type="checkbox" v-model="directStatus">
                      <button @click="newOrder()">Add to Inventory</button>
                    </div>
                  </div>
                </v-container>
              </v-sheet>
            </main>        
          </v-container>
        </v-card>
      </v-app>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
    <script src="app.js"></script>
  </body>
</html>
